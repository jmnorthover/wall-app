(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(24)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),s=n.n(c),u=(n(14),n(1)),o=(n(15),function(e){var t=e.post;return a.a.createElement("div",{className:"post"},a.a.createElement("div",{className:"author"},"Post by ",t.author.username),a.a.createElement("div",{className:"content"},t.content))}),i=n(8),l=n(2),m=n.n(l),p=n(3),f="",d=function(e){f=e},b=function(){var e=Object(p.a)(m.a.mark((function e(t,n,r){var a,c,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({email:t,username:n,password:r}),e.next=3,fetch("/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:a});case 3:if(!(c=e.sent).ok){e.next=12;break}return e.next=7,c.json();case 7:return s=e.sent,d(s.token),e.abrupt("return",s.username);case 12:return e.next=14,c.json();case 14:throw u=e.sent,new Error(u.error);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var r,a,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify({username:t,password:n}),e.next=3,fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:r});case 3:if(!(a=e.sent).ok){e.next=12;break}return e.next=7,a.json();case 7:return c=e.sent,d(c.token),e.abrupt("return",c.username);case 12:return e.next=14,a.json();case 14:throw s=e.sent,new Error(s.error);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/posts");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.posts);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify({postContent:t}),e.next=3,fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:f},body:n});case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:throw new Error("Failed to add post");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=(n(17),function(e){var t=e.posts,n=e.setPosts,c=Object(r.useState)(""),s=Object(u.a)(c,2),o=s[0],l=s[1];return a.a.createElement("div",{className:"add_post_form"},a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),E(o).then((function(e){var r=[e].concat(Object(i.a)(t));n(r)})).catch((function(e){return console.log(e.message)}))}},a.a.createElement("textarea",{required:!0,value:o,onChange:function(e){return l(e.target.value)}}),a.a.createElement("button",{type:"submit"},"Add Post")))}),j=(n(18),function(e){var t=e.user,n=e.setUser,c=Object(r.useState)([]),s=Object(u.a)(c,2),i=s[0],l=s[1];Object(r.useEffect)((function(){v().then((function(e){return l(e)}))}),[]);var m="Guest"!==t&&a.a.createElement(g,{posts:i,setPosts:l}),p=i.map((function(e){return a.a.createElement(o,{post:e,key:e._id})}));return a.a.createElement("div",{className:"wall"},a.a.createElement("h1",null,"Wall App"),a.a.createElement("div",null,"Signed in as ",t),a.a.createElement("button",{className:"sign_out_button",onClick:function(){d(""),n("")}},"Sign Out"),m,a.a.createElement("div",{className:"post_count"},"There are currently ",i.length," posts"),a.a.createElement("div",{className:"posts"},p))}),O=(n(19),function(e){var t=e.setSelection,n=e.setUser;return a.a.createElement("div",{className:"select_buttons"},a.a.createElement("button",{onClick:function(){return t(1)}},"Sign In"),a.a.createElement("button",{onClick:function(){return t(2)}},"Register"),a.a.createElement("button",{onClick:function(){return n("Guest")}},"Continue as Guest"))}),S=(n(20),function(e){var t=e.setSelection,n=e.setUser,c=Object(r.useState)(""),s=Object(u.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),m=Object(u.a)(l,2),p=m[0],f=m[1],d=Object(r.useState)(""),b=Object(u.a)(d,2),v=b[0],E=b[1];return a.a.createElement("div",{className:"sign_in"},a.a.createElement("h2",null,"Sign In"),v&&a.a.createElement("div",{className:"error"},v),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(o,p).then((function(e){return n(e)})).catch((function(e){return E(e.message)}))}},a.a.createElement("input",{required:!0,minLength:"6",maxLength:"30",type:"text",placeholder:"Username",value:o,onChange:function(e){return i(e.target.value)}}),a.a.createElement("input",{required:!0,minLength:"6",maxLength:"30",type:"password",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)}}),a.a.createElement("button",{type:"submit"},"Submit")),a.a.createElement("button",{onClick:function(){return t(0)}},"Go Back"))}),x=(n(21),function(e){var t=e.setSelection,n=e.setUser,c=Object(r.useState)(""),s=Object(u.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)(""),m=Object(u.a)(l,2),p=m[0],f=m[1],d=Object(r.useState)(""),h=Object(u.a)(d,2),v=h[0],E=h[1],g=Object(r.useState)(""),j=Object(u.a)(g,2),O=j[0],S=j[1];return a.a.createElement("div",{className:"register"},a.a.createElement("h2",null,"Register"),O&&a.a.createElement("div",{className:"error"},O),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b(o,p,v).then((function(e){return n(e)})).catch((function(e){return S(e.message)}))}},a.a.createElement("input",{required:!0,type:"text",placeholder:"E-Mail Address",value:o,onChange:function(e){return i(e.target.value)}}),a.a.createElement("input",{required:!0,minLength:"6",maxLength:"30",type:"text",placeholder:"Username",value:p,onChange:function(e){return f(e.target.value)}}),a.a.createElement("input",{required:!0,minLength:"6",maxLength:"30",type:"password",placeholder:"Password",value:v,onChange:function(e){return E(e.target.value)}}),a.a.createElement("button",{type:"submit"},"Submit")),a.a.createElement("button",{onClick:function(){return t(0)}},"Go Back"))}),y=(n(22),function(e){var t,n=e.setUser,c=Object(r.useState)(0),s=Object(u.a)(c,2),o=s[0],i=s[1];return 0===o?t=a.a.createElement(O,{setSelection:i,setUser:n}):1===o?t=a.a.createElement(S,{setSelection:i,setUser:n}):2===o&&(t=a.a.createElement(x,{setSelection:i,setUser:n})),a.a.createElement("div",{className:"home"},a.a.createElement("h1",null,"Wall App"),a.a.createElement("div",null,t))});n(23);var k=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],s=n?a.a.createElement(j,{user:n,setUser:c}):a.a.createElement(y,{setUser:c});return a.a.createElement("div",{className:"App"},s)};s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(k,null)),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.acd9aa50.chunk.js.map